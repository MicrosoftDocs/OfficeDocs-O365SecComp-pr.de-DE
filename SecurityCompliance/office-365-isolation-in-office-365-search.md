---
title: Office 365-Mandantenisolation in Office 365-Suche
ms.author: robmazz
author: robmazz
manager: laurawi
ms.date: 8/21/2018
audience: ITPro
ms.topic: article
ms.service: Office 365 Administration
localization_priority: None
search.appverid:
- MET150
ms.collection: Strat_O365_Enterprise
description: 'Zusammenfassung: Eine Erläuterung der mandantenisolation in Office 365-Suche.'
ms.openlocfilehash: cc73f3c157ffd20b3891a6b7c58e7d0b2adf4e55
ms.sourcegitcommit: 36c5466056cdef6ad2a8d9372f2bc009a30892bb
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/27/2018
ms.locfileid: "22528849"
---
# <a name="tenant-isolation-in-office-365-search"></a><span data-ttu-id="73866-103">Mandantenisolation in Office 365-Suche</span><span class="sxs-lookup"><span data-stu-id="73866-103">Tenant Isolation in Office 365 Search</span></span>
<span data-ttu-id="73866-p101">SharePoint Online-Suche verwendet ein Mandant Trennung Modell, das die Effizienz der freigegebenen Datenstrukturen mit Schutz gegen Informationen verloren gehen, zwischen Mandanten ausgeglichen. Mit diesem Modell zu verhindern, dass wir die Suchfunktionen aus:</span><span class="sxs-lookup"><span data-stu-id="73866-p101">SharePoint Online search uses a tenant separation model that balances the efficiency of shared data structures with protection against information leaking between tenants. With this model, we prevent the Search features from:</span></span>
- <span data-ttu-id="73866-106">Rückgabe von Abfrageergebnissen, die Dokumente aus anderen Mandanten enthalten</span><span class="sxs-lookup"><span data-stu-id="73866-106">Returning query results that contain documents from other tenants</span></span>
- <span data-ttu-id="73866-107">Verfügbarmachen von über ausreichend Informationen in den Abfrageergebnissen angezeigt, dass ein geübt Benutzer Informationen zu anderen Mandanten ableiten konnte</span><span class="sxs-lookup"><span data-stu-id="73866-107">Exposing sufficient information in query results that a skilled user could infer information about other tenants</span></span>
- <span data-ttu-id="73866-108">Anzeigen von Schema oder Einstellungen aus einer anderen Mandanten</span><span class="sxs-lookup"><span data-stu-id="73866-108">Showing schema or settings from another tenant</span></span>
- <span data-ttu-id="73866-109">Mischen von Analytics processing zwischen Mandanten oder Speichern der Ergebnisse im falschen Mandanten</span><span class="sxs-lookup"><span data-stu-id="73866-109">Mixing analytics processing information between tenants or store results in the wrong tenant</span></span>
- <span data-ttu-id="73866-110">Verwenden von Wörterbucheinträge aus einer anderen Mandanten</span><span class="sxs-lookup"><span data-stu-id="73866-110">Using dictionary entries from another tenant</span></span>

<span data-ttu-id="73866-p102">Für jede Art von Mandantendaten verwenden wir eine oder mehrere Schutzebenen im Code, um versehentliche Eindruck von Informationen zu verhindern. Die wichtigsten Daten hat die meisten Schutzebenen um sicherzustellen, dass Sie ein einzelner Fehler tatsächliche oder wahrgenommene Informationslecks führen nicht.</span><span class="sxs-lookup"><span data-stu-id="73866-p102">For each type of tenant data, we use one or more layers of protection in the code to prevent accidental leaking of information. The most critical data has the most layers of protection to make sure that a single defect doesn't result in actual or perceived information leakage.</span></span>

## <a name="tenant-separation-for-the-search-index"></a><span data-ttu-id="73866-113">Mandanten Trennung für den Suchindex</span><span class="sxs-lookup"><span data-stu-id="73866-113">Tenant Separation for the Search Index</span></span>
<span data-ttu-id="73866-p103">Der Suchindex wird auf dem Datenträger, auf den Servern, die indexkomponenten hosten gespeichert und die Mandanten die Indexdateien freigeben. Indizierte Dokumente einen Mandanten sind nur für Abfragen für diese Mandanten angezeigt. Drei unabhängige Mechanismen zu verhindern, dass Informationslecks:</span><span class="sxs-lookup"><span data-stu-id="73866-p103">The search index is stored on disk in the servers hosting the index components and the tenants share the index files. A tenant's indexed documents are visible only for queries for that tenant. Three independent mechanisms prevent information leakage:</span></span>
- <span data-ttu-id="73866-117">Mandanten-ID-Filterung</span><span class="sxs-lookup"><span data-stu-id="73866-117">Tenant ID filtering</span></span>
- <span data-ttu-id="73866-118">Mandanten ID Begriff voranstellen</span><span class="sxs-lookup"><span data-stu-id="73866-118">Tenant ID term prefixing</span></span>
- <span data-ttu-id="73866-119">ACL-Überprüfung</span><span class="sxs-lookup"><span data-stu-id="73866-119">ACL checks</span></span>

<span data-ttu-id="73866-120">Alle drei Mechanismen müssten ausfallen für die Suche auf Dokumente, die dem falschen Mandanten zurückgegeben.</span><span class="sxs-lookup"><span data-stu-id="73866-120">All three mechanisms would have to fail for Search to return documents to the wrong tenant.</span></span>

## <a name="tenant-id-filtering-and-tenant-id-term-prefixing"></a><span data-ttu-id="73866-121">Mandanten-ID-Filterung und Mandanten-ID Begriff voranstellen</span><span class="sxs-lookup"><span data-stu-id="73866-121">Tenant ID Filtering and Tenant ID Term Prefixing</span></span>
<span data-ttu-id="73866-p104">Suche Präfixe jeder Begriff, der in den Volltextindex mit der Mandanten-ID indiziert ist Angenommen, wenn der Begriff "*Foo*" für einen Mandanten mit der ID "*123*" indiziert ist, der Eintrag in der Volltextindex ist "*123foo.*"</span><span class="sxs-lookup"><span data-stu-id="73866-p104">Search prefixes every term that is indexed in the full-text index with the tenant ID. For example, when the term "*foo*" is indexed for a tenant with an ID of "*123*", the entry in the full-text index is "*123foo.*"</span></span>

<span data-ttu-id="73866-p105">Jede Abfrage wird zum Einschließen von der Mandanten-ID unter Verwendung der sogenannten Mandanten-ID-Filterung konvertiert. Beispielsweise wird die Abfrage "*Foo*" in "<*Guid*>. konvertiert *"Foo"* UND *TenantID*: <*Guid*> ", wobei <*Guid*> den Mandanten Ausführen der Abfrage darstellt. Diese Abfrage Konvertierung in jeder Indexknoten auftritt, und Verarbeitung der Abfrage weder Inhalt kann es beeinflussen. Da jede Abfrage die Mandanten-ID hinzugefügt wird, kann nicht die Häufigkeit von einem Ausdruck in anderen Mandanten Schlüsseltokens im besten Übereinstimmung in einem Mandanten ranking abgeleitet werden.</span><span class="sxs-lookup"><span data-stu-id="73866-p105">Every query is converted to include the tenant ID using a process called tenant ID filtering. For example, the query "*foo*" is converted to "<*guid*>.*foo* AND *tenantID*:<*guid*>", where <*guid*> represents the tenant performing the query. This query conversion occurs within each index node and neither query nor content processing can influence it. Because the tenant ID is added to every query, the frequency of a term in other tenants can't be inferred by looking at best match ranking in one tenant.</span></span>

<span data-ttu-id="73866-p106">Mandanten ID Begriff voranstellen tritt nur in den Volltextindex. Mit denen sich Suchvorgängen, z. B. "*Titel: Foo*", die eine synthetische Suchindex, in dem Begriffe vorangestellt werden nicht durch Mandanten-ID Stattdessen werden der Name des Felds mit denen sich Suchvorgänge vorangestellt. Beispielsweise wird die Abfrage "*Titel: Foo*" in konvertiert "*fields.title:foo und fields.tenantID*: <*Guid*>." Da die Häufigkeit eines Begriffs Bewertung von Treffer im Suchindex synthetische beeinflussen nicht, besteht keine Notwendigkeit zur Mandanten Trennung Begriff vorangestellt. Für eine Suche fielded wie "*Titel: Foo*" hängt Mandanten-ID-Filterung nach Abfrage Konvertierung Content Trennung Mandanten.</span><span class="sxs-lookup"><span data-stu-id="73866-p106">Tenant ID term prefixing occurs only in the full-text index. Fielded searches, such as "*title:foo*", go to a synthetic search index where terms aren't prefixed by tenant ID. Instead, fielded searches are prefixed with the field name. For example, the query "*title:foo*" is converted to "*fields.title:foo AND fields.tenantID*:<*guid*>." Because the frequency of a term doesn't influence ranking of hits in the synthetic search index, there's no need for tenant separation by term prefixing. For a fielded search like "*title:foo*", tenant content separation depends on tenant ID filtering by query conversion.</span></span>

## <a name="document-access-control-list-checks"></a><span data-ttu-id="73866-134">Liste überprüft Dokument Access Steuerelement</span><span class="sxs-lookup"><span data-stu-id="73866-134">Document Access Control List Checks</span></span>
<span data-ttu-id="73866-p107">Suche steuert den Zugriff auf Dokumente über ACLs, die im Suchindex gespeichert sind. Jedes Element wird mit einem Satz von Ausdrücken in einem speziellen ACL-Feld indiziert. Das ACL-Feld enthält einen Begriff pro Gruppen- oder Benutzernamen, die das Dokument anzeigen können. Jede Abfrage wird mit einer Liste von Access-Steuerelement (Entry, ACE) ausgedrückt, eine für jede Gruppe erweitert, zu der der authentifizierte Benutzer gehört.</span><span class="sxs-lookup"><span data-stu-id="73866-p107">Search controls access to documents through ACLs that are saved in the search index. Every item is indexed with a set of terms in a special ACL field. The ACL field contains one term per group or user that can view the document. Every query is augmented with a list of access control entry (ACE) terms, one for each group to which the authenticated user belongs.</span></span>

<span data-ttu-id="73866-139">Beispielsweise eine Abfrage wie "<*Guid*>. *Foo und TenantID*: <*Guid*> "wird:" <*Guid*>. *Foo und TenantID*: <*Guid*> *AND* (*DocACL:*<*ace1*> *OR DocACL*: <*ace2*> *OR DocACL*: <*ace3*> *... *)"</span><span class="sxs-lookup"><span data-stu-id="73866-139">For example, a query like "<*guid*>.*foo AND tenantID*:<*guid*>" becomes: "<*guid*>.*foo AND tenantID*:<*guid*> *AND* (*docACL:*<*ace1*> *OR docACL*:<*ace2*> *OR docACL*:<*ace3*> *...*)"</span></span>

<span data-ttu-id="73866-p108">Da Benutzer und Gruppen-IDs und daher ACEs sind eindeutig, dadurch wird eine zusätzliche Sicherheitsebene zwischen Mandanten für Dokumente, die nur für einige Benutzer sichtbar sind. Die gleichen wird die Groß-/Kleinschreibung für die spezielle "alle Benutzer mit Ausnahme von externen Benutzern" ACE, der im Mandanten Empfängerbenutzer Zugriff gewährt. Da die Zugriffssteuerungseinträge für "Jeder" für alle Mandanten identisch sind, Mandanten Trennung für Öffentliche Dokumente richtet sich jedoch Mandanten-ID-Filterung. Verweigern Sie ACEs werden ebenfalls unterstützt. Die Abfrage anspruchserweiterung Fügt eine Klausel, die ein Dokument aus dem Ergebnis entfernt, wenn eine Übereinstimmung mit einen Deny-ZUGRIFFSSTEUERUNGSEINTRAG vorhanden ist.</span><span class="sxs-lookup"><span data-stu-id="73866-p108">Because user and group identifiers and hence ACEs are unique, this provides an extra level of security between tenants for documents that are only visible to some users. The same is the case for the special "Everyone except external users" ACE that grants access to regular users in the tenant. But since ACEs for "Everyone" are the same for all tenants, tenant separation for public documents depends on tenant ID filtering. Deny ACEs are also supported. The query augmentation adds a clause that removes a document from the result when there is a match with a deny ACE.</span></span>

<span data-ttu-id="73866-p109">Der Index ist in Exchange Online-Suche auf Postfach-ID für einzelne Benutzer Postfächer anstelle von Mandanten-ID (Abonnement-ID) wie in SharePoint Online partitioniert. Der Partitionierung Mechanismus ist identisch mit SharePoint Online, aber es gibt keine ACL filtern.</span><span class="sxs-lookup"><span data-stu-id="73866-p109">In Exchange Online search, the index is partitioned on mailbox ID for individual user's mailboxes instead of tenant ID (subscription ID) as in SharePoint Online. The partitioning mechanism is the same as SharePoint Online, but there is no ACL filtering.</span></span>
