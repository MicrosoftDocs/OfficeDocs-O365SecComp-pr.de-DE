---
title: Office 365-Mandanten Isolierung in Office 365-Suche
ms.author: robmazz
author: robmazz
manager: laurawi
ms.date: 8/21/2018
audience: ITPro
ms.topic: article
ms.service: Office 365 Administration
localization_priority: None
search.appverid:
- MET150
ms.collection:
- Strat_O365_IP
- M365-security-compliance
description: 'Zusammenfassung: eine Erläuterung der Mandanten Isolierung in der Office 365-Suche.'
ms.openlocfilehash: b9faae9f1d61af181807f60243890b5115c0d679
ms.sourcegitcommit: c94cb88a9ce5bcc2d3c558f0fcc648519cc264a2
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 02/20/2019
ms.locfileid: "30090807"
---
# <a name="tenant-isolation-in-office-365-search"></a><span data-ttu-id="3b69e-103">Mandantenisolation in der Office 365-Suche</span><span class="sxs-lookup"><span data-stu-id="3b69e-103">Tenant Isolation in Office 365 Search</span></span>
<span data-ttu-id="3b69e-p101">Bei der SharePoint Online-Suche wird ein Mandanten Trennungsmodell verwendet, das die Effizienz freigegebener Datenstrukturen mit dem Schutz vor Datenverlust zwischen Mandanten abgleicht. Bei diesem Modell wird verhindert, dass die Suchfunktionen:</span><span class="sxs-lookup"><span data-stu-id="3b69e-p101">SharePoint Online search uses a tenant separation model that balances the efficiency of shared data structures with protection against information leaking between tenants. With this model, we prevent the Search features from:</span></span>
- <span data-ttu-id="3b69e-106">Zurückgeben von Abfrageergebnissen, die Dokumente von anderen Mandanten enthalten</span><span class="sxs-lookup"><span data-stu-id="3b69e-106">Returning query results that contain documents from other tenants</span></span>
- <span data-ttu-id="3b69e-107">Verfügbar machen ausreichender Informationen in Abfrageergebnissen, dass ein qualifizierter Benutzerinformationen zu anderen Mandanten ableiten kann</span><span class="sxs-lookup"><span data-stu-id="3b69e-107">Exposing sufficient information in query results that a skilled user could infer information about other tenants</span></span>
- <span data-ttu-id="3b69e-108">Anzeigen von Schema oder Einstellungen eines anderen Mandanten</span><span class="sxs-lookup"><span data-stu-id="3b69e-108">Showing schema or settings from another tenant</span></span>
- <span data-ttu-id="3b69e-109">Mischen von Analyse Verarbeitungsinformationen zwischen Mandanten oder Speichern von Ergebnissen im falschen Mandanten</span><span class="sxs-lookup"><span data-stu-id="3b69e-109">Mixing analytics processing information between tenants or store results in the wrong tenant</span></span>
- <span data-ttu-id="3b69e-110">Verwenden von Wörterbucheinträgen eines anderen Mandanten</span><span class="sxs-lookup"><span data-stu-id="3b69e-110">Using dictionary entries from another tenant</span></span>

<span data-ttu-id="3b69e-p102">Für jeden Typ von Mandantendaten verwenden wir eine oder mehrere Schutzebenen im Code, um versehentliches Auslaufen von Informationen zu verhindern. Die kritischsten Daten verfügen über die meisten Schutzschichten, um sicherzustellen, dass ein einzelner Fehler nicht zu tatsächlichen oder vermeintlichen Informationslecks führt.</span><span class="sxs-lookup"><span data-stu-id="3b69e-p102">For each type of tenant data, we use one or more layers of protection in the code to prevent accidental leaking of information. The most critical data has the most layers of protection to make sure that a single defect doesn't result in actual or perceived information leakage.</span></span>

## <a name="tenant-separation-for-the-search-index"></a><span data-ttu-id="3b69e-113">MandantenTrennung für den suchIndex</span><span class="sxs-lookup"><span data-stu-id="3b69e-113">Tenant Separation for the Search Index</span></span>
<span data-ttu-id="3b69e-p103">Der Suchindex wird auf dem Datenträger auf den Servern gespeichert, auf denen die Indexkomponenten gehostet werden, und die Mandanten teilen die Indexdateien. Indizierte Dokumente eines Mandanten sind nur für Abfragen für diesen Mandanten sichtbar. Drei unabhängige Mechanismen verhindern Informationslecks:</span><span class="sxs-lookup"><span data-stu-id="3b69e-p103">The search index is stored on disk in the servers hosting the index components and the tenants share the index files. A tenant's indexed documents are visible only for queries for that tenant. Three independent mechanisms prevent information leakage:</span></span>
- <span data-ttu-id="3b69e-117">Mandanten-ID-Filterung</span><span class="sxs-lookup"><span data-stu-id="3b69e-117">Tenant ID filtering</span></span>
- <span data-ttu-id="3b69e-118">Mandanten-ID-Präfix</span><span class="sxs-lookup"><span data-stu-id="3b69e-118">Tenant ID term prefixing</span></span>
- <span data-ttu-id="3b69e-119">ACL-Prüfungen</span><span class="sxs-lookup"><span data-stu-id="3b69e-119">ACL checks</span></span>

<span data-ttu-id="3b69e-120">Alle drei Mechanismen müssten fehlschlagen, damit die Suche Dokumente an den falschen Mandanten zurückgibt.</span><span class="sxs-lookup"><span data-stu-id="3b69e-120">All three mechanisms would have to fail for Search to return documents to the wrong tenant.</span></span>

## <a name="tenant-id-filtering-and-tenant-id-term-prefixing"></a><span data-ttu-id="3b69e-121">Mandanten-ID-Filterung und Mandanten-ID-Präfix</span><span class="sxs-lookup"><span data-stu-id="3b69e-121">Tenant ID Filtering and Tenant ID Term Prefixing</span></span>
<span data-ttu-id="3b69e-p104">Such Präfixe alle im Volltextindex indizierten Ausdrücke mit der Mandanten-ID. Wenn der Ausdruck "*foo*" beispielsweise für einen Mandanten mit der ID "*123*" indiziert ist, lautet der Eintrag im Volltextindex "123foo"*.*</span><span class="sxs-lookup"><span data-stu-id="3b69e-p104">Search prefixes every term that is indexed in the full-text index with the tenant ID. For example, when the term "*foo*" is indexed for a tenant with an ID of "*123*", the entry in the full-text index is "*123foo.*"</span></span>

<span data-ttu-id="3b69e-p105">Jede Abfrage wird in die Mandanten-ID mit dem Prozess Mandanten-ID-Filterung konvertiert. Beispielsweise wird die Abfrage "*foo*" in "<*GUID*>" konvertiert. *foo* UND *mandantEN*-ID: <*GUID*_GT_ ", wobei <*GUID*> den Mandanten darstellt, der die Abfrage ausführt. Diese Abfrage Konvertierung erfolgt innerhalb jedes Index Knotens, und weder die Abfrage-noch die Inhaltsverarbeitung kann Sie beeinflussen. Da die Mandanten-ID jeder Abfrage hinzugefügt wird, kann die Häufigkeit eines Ausdrucks in anderen Mandanten nicht abgeleitet werden, indem die Best Match-Rangfolge in einem Mandanten betrachtet wird.</span><span class="sxs-lookup"><span data-stu-id="3b69e-p105">Every query is converted to include the tenant ID using a process called tenant ID filtering. For example, the query "*foo*" is converted to "<*guid*>.*foo* AND *tenantID*:<*guid*>", where <*guid*> represents the tenant performing the query. This query conversion occurs within each index node and neither query nor content processing can influence it. Because the tenant ID is added to every query, the frequency of a term in other tenants can't be inferred by looking at best match ranking in one tenant.</span></span>

<span data-ttu-id="3b69e-p106">Das Präfix für die Mandanten-ID wird nur im Volltextindex angezeigt. Feld Suchen, wie "*Title: foo*", wechseln zu einem synthetischen Suchindex, in dem Ausdrücke nicht der Mandanten-ID vorangestellt werden. Stattdessen wird FIELDED searchs der Feldname vorangestellt. Die Abfrage "*Title: foo*" wird beispielsweise in "Fields *. Title: foo und Fields. Mandantin*: <*GUID*>." konvertiert. Da die Häufigkeit eines Ausdrucks die Rangfolge der Treffer im synthetischen Suchindex nicht beeinflusst, besteht keine Notwendigkeit für eine mandantentrennung nach Begriffs Präfix. Für eine Feld Suche wie "*Title: foo*" hängt die Inhalts Trennung des Mandanten von der Mandanten-ID-Filterung nach der Abfrage Konvertierung ab.</span><span class="sxs-lookup"><span data-stu-id="3b69e-p106">Tenant ID term prefixing occurs only in the full-text index. Fielded searches, such as "*title:foo*", go to a synthetic search index where terms aren't prefixed by tenant ID. Instead, fielded searches are prefixed with the field name. For example, the query "*title:foo*" is converted to "*fields.title:foo AND fields.tenantID*:<*guid*>." Because the frequency of a term doesn't influence ranking of hits in the synthetic search index, there's no need for tenant separation by term prefixing. For a fielded search like "*title:foo*", tenant content separation depends on tenant ID filtering by query conversion.</span></span>

## <a name="document-access-control-list-checks"></a><span data-ttu-id="3b69e-134">ÜberPrüfungen der Dokumentzugriffs Steuerungsliste</span><span class="sxs-lookup"><span data-stu-id="3b69e-134">Document Access Control List Checks</span></span>
<span data-ttu-id="3b69e-p107">Die Suche steuert den Zugriff auf Dokumente über ACLs, die im Suchindex gespeichert sind. Jedes Element wird mit einem Satz von Begriffen in einem speziellen ACL-Feld indiziert. Das ACL-Feld enthält einen Ausdruck pro Gruppe oder Benutzer, der das Dokument anzeigen kann. Jede Abfrage wird mit einer Liste von ACE-Ausdrücken (Access Control Entry, Zugriffssteuerungseintrag) ergänzt, eine für jede Gruppe, zu der der authentifizierte Benutzer gehört.</span><span class="sxs-lookup"><span data-stu-id="3b69e-p107">Search controls access to documents through ACLs that are saved in the search index. Every item is indexed with a set of terms in a special ACL field. The ACL field contains one term per group or user that can view the document. Every query is augmented with a list of access control entry (ACE) terms, one for each group to which the authenticated user belongs.</span></span>

<span data-ttu-id="3b69e-139">Beispiel: eine Abfrage wie "<*GUID*>. *foo und mandantEN-* ID: <*GUID*> "wird:" <*GUID*>. *foo und Mandanten-* ID: <-*GUID*> *und* (*docACL:*<*ace1*> *oder docACL*: <*ace2*> *oder docACL*: <*ace3*> \*... \*)"</span><span class="sxs-lookup"><span data-stu-id="3b69e-139">For example, a query like "<*guid*>.*foo AND tenantID*:<*guid*>" becomes: "<*guid*>.*foo AND tenantID*:<*guid*> *AND* (*docACL:*<*ace1*> *OR docACL*:<*ace2*> *OR docACL*:<*ace3*> *...*)"</span></span>

<span data-ttu-id="3b69e-p108">Da Benutzer-und Gruppen-IDs und damit auch ACEs eindeutig sind, bietet dies eine zusätzliche Sicherheitsstufe zwischen Mandanten für Dokumente, die für einige Benutzer nur sichtbar sind. Das gleiche gilt für das besondere "alle außer externen Benutzer"-ACE, die regulären Benutzern im Mandanten Zugriff gewährt. Da ACEs für "alle" jedoch für alle Mandanten identisch sind, hängt die mandantentrennung für öffentliche Dokumente von der Mandanten-ID-Filterung ab. Deny-ACEs werden ebenfalls unterstützt. Die Abfrageerweiterung fügt eine Klausel hinzu, die ein Dokument aus dem Ergebnis entfernt, wenn eine Übereinstimmung mit einem Deny-ACE vorliegt.</span><span class="sxs-lookup"><span data-stu-id="3b69e-p108">Because user and group identifiers and hence ACEs are unique, this provides an extra level of security between tenants for documents that are only visible to some users. The same is the case for the special "Everyone except external users" ACE that grants access to regular users in the tenant. But since ACEs for "Everyone" are the same for all tenants, tenant separation for public documents depends on tenant ID filtering. Deny ACEs are also supported. The query augmentation adds a clause that removes a document from the result when there is a match with a deny ACE.</span></span>

<span data-ttu-id="3b69e-p109">In der Exchange Online-Suche wird der Index für die Postfächer der einzelnen Benutzer anstelle der Mandanten-ID (Abonnement-ID), wie in SharePoint Online, partitioniert. Der Partitionierungs Mechanismus ist identisch mit SharePoint Online, aber es gibt keine ACL-Filterung.</span><span class="sxs-lookup"><span data-stu-id="3b69e-p109">In Exchange Online search, the index is partitioned on mailbox ID for individual user's mailboxes instead of tenant ID (subscription ID) as in SharePoint Online. The partitioning mechanism is the same as SharePoint Online, but there is no ACL filtering.</span></span>
