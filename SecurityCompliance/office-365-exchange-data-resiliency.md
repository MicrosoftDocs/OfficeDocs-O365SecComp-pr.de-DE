---
title: Office 365 Exchange-Datensicherheit
ms.author: robmazz
author: robmazz
manager: laurawi
ms.date: 8/21/2018
audience: ITPro
ms.topic: article
ms.service: Office 365 Administration
localization_priority: None
search.appverid:
- MET150
ms.collection:
- Strat_O365_IP
- M365-security-compliance
description: Eine Erläuterung der verschiedenen Aspekte der Ausfallsicherheit von Daten in Exchange Online und Office 365.
ms.openlocfilehash: 5c0f42d1abc48b497a915354e3056b47a41326c5
ms.sourcegitcommit: c94cb88a9ce5bcc2d3c558f0fcc648519cc264a2
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 02/20/2019
ms.locfileid: "30090947"
---
# <a name="exchange-online-data-resiliency-in-office-365"></a><span data-ttu-id="cffd0-103">Exchange Online-Datensicherheit in Office 365</span><span class="sxs-lookup"><span data-stu-id="cffd0-103">Exchange Online Data Resiliency in Office 365</span></span>

## <a name="introduction"></a><span data-ttu-id="cffd0-104">Einführung</span><span class="sxs-lookup"><span data-stu-id="cffd0-104">Introduction</span></span>
<span data-ttu-id="cffd0-p101">Es gibt zwei Arten von Beschädigungen, die sich auf eine Exchange-Datenbank auswirken können: physische Beschädigungen, die in der Regel durch Hardware (insbesondere Speicherhardware) verursacht werden, und logische Beschädigungen, die aufgrund anderer Faktoren auftreten. Im Allgemeinen gibt es zwei Arten von logischen Beschädigungen, die in einer Exchange-Datenbank auftreten können:</span><span class="sxs-lookup"><span data-stu-id="cffd0-p101">There are two types of corruption that can affect an Exchange database: physical corruption, which is typically caused by hardware (in particular, storage hardware) problems, and logical corruption, which occurs due to other factors. Generally, there are two types of logical corruption that can occur within an Exchange database:</span></span> 
- <span data-ttu-id="cffd0-p102">**Logische Beschädigung der Datenbank** – die Prüfsumme der Datenbankseite stimmt, aber die Daten auf der Seite sind logisch falsch. Dies kann auftreten, wenn das Datenbankmodul (ESE (Extensible Storage Engine)) versucht, eine Datenbankseite zu schreiben, und obwohl das Betriebssystem eine Erfolgsmeldung zurückgibt, die Daten entweder nie auf den Datenträger geschrieben werden oder an der falschen Stelle geschrieben werden. Dies wird als *Lost Flush*bezeichnet. ESE enthält zahlreiche Features und Sicherheitsvorkehrungen, die eine physische Beschädigung einer Datenbank und anderer datenverlustszenarien verhindern sollen. Um zu verhindern, dass Verlust von Datenverlusten verloren geht, enthält ESE einen Mechanismus zur Bereinigung von Leerzeichen in der Datenbank zusammen mit einem Feature (Einzelseiten Wiederherstellung), um es zu korrigieren.</span><span class="sxs-lookup"><span data-stu-id="cffd0-p102">**Database logical corruption** - The database page checksum matches, but the data on the page is wrong logically. This can occur when the database engine (the Extensible Storage Engine (ESE)) attempts to write a database page and even though the operating system returns a success message, the data is either never written to the disk or it's written to the wrong place. This is referred to as a *lost flush*. ESE includes numerous features and safeguards that are designed to prevent physical corruption of a database and other data loss scenarios. To prevent lost flushes from losing data, ESE includes a lost flush detection mechanism in the database along with a feature (single page restore) to correct it.</span></span> 
- <span data-ttu-id="cffd0-p103">**Speicher logische Beschädigung** – Daten werden in einer vom Benutzer erwarteten Weise hinzugefügt, gelöscht oder manipuliert. Diese Fälle werden in der Regel durch Anwendungen von Drittanbietern verursacht. Es ist in der Regel nur eine Beschädigung in dem Sinne, dass der Benutzer es als Beschädigung betrachtet. Der Exchange-Speicher betrachtet die Transaktion, die die logische Beschädigung verursacht hat, als eine Reihe gültiger MAPI-Vorgänge. Die [in-situ-Aufbewahrungs](https://docs.microsoft.com/exchange/security-and-compliance/create-or-remove-in-place-holds) Funktionen in Exchange Online bieten Schutz vor Speicher logischen Beschädigungen (da verhindert wird, dass Inhalte dauerhaft von einem Benutzer oder einer Anwendung gelöscht werden).</span><span class="sxs-lookup"><span data-stu-id="cffd0-p103">**Store logical corruption** - Data is added, deleted, or manipulated in a way that the user doesn't expect. These cases are generally caused by third-party applications. It's generally only corruption in the sense that the user views it as corruption. The Exchange store considers the transaction that produced the logical corruption to be a series of valid MAPI operations. The [In-Place Hold](https://docs.microsoft.com/exchange/security-and-compliance/create-or-remove-in-place-holds) features in Exchange Online provides protection from store logical corruption (because it prevents content from being permanently deleted by a user or an application).</span></span> 

<span data-ttu-id="cffd0-p104">Exchange Online führt während der Protokoll Überprüfung und der Protokollwiedergabe mehrere Konsistenzprüfungen für replizierte Protokolldateien aus. Diese Konsistenzprüfungen verhindern, dass physische Beschädigungen vom System repliziert werden. Beispielsweise gibt es bei der Protokoll Überprüfung eine physikalische Integritätsprüfung, die die Protokolldatei überprüft und überprüft, ob die in der Protokolldatei aufgezeichnete Prüfsumme mit der im Arbeitsspeicher generierten Prüfsumme übereinstimmt. Darüber hinaus wird der Protokoll Dateikopf überprüft, um sicherzustellen, dass die im Protokollheader aufgezeichnete Protokolldatei mit der Protokolldatei übereinstimmt. Während der Protokollwiedergabe wird die Protokolldatei genauer untersucht. Der Datenbankheader enthält beispielsweise auch die Protokollsignatur, die mit der Signatur der Protokolldatei verglichen wird, um sicherzustellen, dass Sie übereinstimmen.</span><span class="sxs-lookup"><span data-stu-id="cffd0-p104">Exchange Online performs several consistency checks on replicated log files during both log inspection and log replay. These consistency checks prevent physical corruption from being replicated by the system. For example, during log inspection, there is a physical integrity check which verifies the log file and validates that the checksum recorded in the log file matches the checksum generated in memory. In addition, the log file header is examined to make sure the log file signature recorded in the log header matches that of the log file. During log replay, the log file undergoes further scrutiny. For example, the database header also contains the log signature which is compared with the log file's signature to ensure they match.</span></span> 

<span data-ttu-id="cffd0-p105">Schutz vor Beschädigung von Postfachdaten in Exchange Online wird mithilfe von Exchange Native Data Protection, eine Ausfallsicherheit Strategie, die Replikation auf Anwendungsebene über mehrere Server und mehrere Rechenzentren zusammen mit anderen Features zum Schutz vor Verlust von Daten aufgrund von Beschädigungen oder anderen Gründen. Zu diesen Features gehören systemeigene Features, die von Microsoft oder der Exchange Online-Anwendung selbst verwaltet werden, wie beispielsweise:</span><span class="sxs-lookup"><span data-stu-id="cffd0-p105">Protection against corruption of mailbox data in Exchange Online is achieved by using Exchange Native Data Protection, a resiliency strategy that leverages application-level replication across multiple servers and multiple datacenters along with other features that help protect data from being lost due to corruption or other reasons. These features include native features that are managed by Microsoft or the Exchange Online application itself, such as:</span></span>

- [<span data-ttu-id="cffd0-125">Daten VerfügbarkeitsGruppen</span><span class="sxs-lookup"><span data-stu-id="cffd0-125">Data Availability Groups</span></span>](https://docs.microsoft.com/exchange/back-up-email)
- <span data-ttu-id="cffd0-126">Korrektur für ein einzelnes Bit</span><span class="sxs-lookup"><span data-stu-id="cffd0-126">Single Bit Correction</span></span> 
- <span data-ttu-id="cffd0-127">Online Datenbank-überPrüfung</span><span class="sxs-lookup"><span data-stu-id="cffd0-127">Online Database Scanning</span></span> 
- <span data-ttu-id="cffd0-128">Erkennung verlorener Flush</span><span class="sxs-lookup"><span data-stu-id="cffd0-128">Lost Flush Detection</span></span> 
- <span data-ttu-id="cffd0-129">Wiederherstellung einzelner Seiten</span><span class="sxs-lookup"><span data-stu-id="cffd0-129">Single Page Restore</span></span> 
- <span data-ttu-id="cffd0-130">Postfachreplikationsdienst</span><span class="sxs-lookup"><span data-stu-id="cffd0-130">Mailbox Replication Service</span></span> 
- <span data-ttu-id="cffd0-131">Protokolldatei Prüfungen</span><span class="sxs-lookup"><span data-stu-id="cffd0-131">Log File Checks</span></span> 
- <span data-ttu-id="cffd0-132">Bereitstellung auf einem stabilen Datei System</span><span class="sxs-lookup"><span data-stu-id="cffd0-132">Deployment on Resilient File System</span></span> 

<span data-ttu-id="cffd0-p106">Weitere Informationen zu den oben aufgeführten systemeigenen Features erhalten Sie, wenn Sie auf die obigen Hyperlinks klicken, um weitere Informationen und Details zu Elementen ohne Hyperlinks anzuzeigen. Zusätzlich zu diesen systemeigenen Features umfasst Exchange Online auch Daten Resilienz-Features, die Kunden verwalten können, wie zum Beispiel:</span><span class="sxs-lookup"><span data-stu-id="cffd0-p106">For more information on the native features listed above, click on the above hyperlinks, and see below for additional information and for details on items without hyperlinks. In addition to these native features, Exchange Online also includes data resiliency features that customers can manage, such as:</span></span> 
- [<span data-ttu-id="cffd0-135">Wiederherstellung einzelner Elemente (standardmäßig aktiviert)</span><span class="sxs-lookup"><span data-stu-id="cffd0-135">Single Item Recovery (enabled by default)</span></span>](https://docs.microsoft.com/exchange/recipients-in-exchange-online/manage-user-mailboxes/recover-deleted-messages) 
- [<span data-ttu-id="cffd0-136">In-Situ-Speicher und Beweissicherungsverfahren</span><span class="sxs-lookup"><span data-stu-id="cffd0-136">In-Place Hold and Litigation Hold</span></span>](https://docs.microsoft.com/exchange/security-and-compliance/in-place-and-litigation-holds) 
- [<span data-ttu-id="cffd0-137">Aufbewahrungszeit für gelöschte Elemente und automatisch gelöschte Postfächer (beide sind standardmäßig aktiviert)</span><span class="sxs-lookup"><span data-stu-id="cffd0-137">Deleted Item Retention and Soft-Deleted Mailboxes (both enabled by default)</span></span>](https://docs.microsoft.com/exchange/recipients-in-exchange-online/delete-or-restore-mailboxes) 

## <a name="database-availability-groups"></a><span data-ttu-id="cffd0-138">Database Availability Groups</span><span class="sxs-lookup"><span data-stu-id="cffd0-138">Database Availability Groups</span></span> 
<span data-ttu-id="cffd0-p107">Jede Postfachdatenbank in Office 365 wird in einer [Database Availability Group (DAG)](https://docs.microsoft.com/exchange/back-up-email) gehostet und in geografisch getrennte Datencenter innerhalb derselben Region repliziert. Die häufigste Konfiguration ist vier Datenbankkopien in vier Rechenzentren; Einige Regionen verfügen jedoch über weniger Rechenzentren (Datenbankenwerden in drei Rechenzentren in Indien und zwei Rechenzentren in Australien und Japan repliziert). In allen Fällen verfügt jedoch jede Postfachdatenbank über vier Kopien, die über mehrere Rechenzentren verteilt sind, wodurch sichergestellt wird, dass die Postfachdaten vor Software-, Hardware-und sogar Rechenzentrums Fehlern geschützt sind.</span><span class="sxs-lookup"><span data-stu-id="cffd0-p107">Every mailbox database in Office 365 is hosted in a [database availability group (DAG)](https://docs.microsoft.com/exchange/back-up-email) and replicated to geographically-separate datacenters within the same region. The most common configuration is four database copies in four datacenters; however, some regions have fewer datacenters (databases are replicated to three datacenters in India, and two datacenters in Australia and Japan). But in all cases, every mailbox database has four copies that are distributed across multiple datacenters, thereby ensuring that mailbox data is protected from software, hardware, and even datacenter failures.</span></span> 

<span data-ttu-id="cffd0-p108">Von diesen vier Kopien werden drei davon als hoch verfügbar konfiguriert. Die vierte Kopie ist als verzögerte [Datenbankkopie](https://docs.microsoft.com/Exchange/high-availability/manage-ha/activate-lagged-db-copies)konfiguriert. Die verzögerte Datenbankkopie ist nicht für die Wiederherstellung einzelner Postfächer oder Postfachelemente vorgesehen. Ziel ist die Bereitstellungeines Wiederherstellungsmechanismus für das seltene Ereignis einer systemweiten, katastrophalen logischen Beschädigung.</span><span class="sxs-lookup"><span data-stu-id="cffd0-p108">Out of these four copies, three of them are configured as highly available. The fourth copy is configured as a [lagged database copy](https://docs.microsoft.com/Exchange/high-availability/manage-ha/activate-lagged-db-copies). The lagged database copy is not intended for individual mailbox recovery or mailbox item recovery. Its purpose is to provide a recovery mechanism for the rare event of system-wide, catastrophic logical corruption.</span></span> 

<span data-ttu-id="cffd0-p109">Verzögerte Datenbankkopien in Exchange Online werden mit einem siebentägigen Replay-Verzögerungs Zeitpunkt für die Protokolldatei konfiguriert. Darüber hinaus ist der Exchange-Replay-Verzögerungs-Manager aktiviert, um eine dynamische Protokolldatei für verzögerte Kopien bereitzustellen, damit verzögerte Datenbankkopien selbst repariert und das Wachstum der Protokolldatei verwaltet werden kann. Obwohl verzögerte Datenbankkopien in Exchange Online verwendet werden, ist es wichtig zu wissen, dass es sich nicht um eine garantierte Point-in-Time-Sicherung handelt. Verzögerte Datenbankkopien in Exchange Online verfügen über einen Verfügbarkeits Schwellenwert (in der Regel rund 90%), da der Datenträger, der eine verzögerte Kopie enthält, aufgrund eines Datenträgerfehlers verloren geht, und dass die verzögerte Kopie zu einer hoch verfügbaren Kopie (aufgrund der automatischen Wiedergabe) wird. als die Zeiträume, in denen die verzögerte Datenbankkopie die Protokollwiedergabe Warteschlange neu aufbaut.</span><span class="sxs-lookup"><span data-stu-id="cffd0-p109">Lagged database copies in Exchange Online are configured with a seven-day log file replay lag time. In addition, the Exchange Replay Lag Manager is enabled to provide dynamic log file play down for lagged copies to allow lagged database copies to self-repair and manage log file growth. Although lagged database copies are used in Exchange Online, it is important to understand that they are not a guaranteed point-in-time backup. Lagged database copies in Exchange Online have an availability threshold, typically around 90%, due to periods where the disk containing a lagged copy is lost due to disk failure, the lagged copy becoming a highly-available copy (due to automatic play down), as well as the periods where the lagged database copy is re-building the log replay queue.</span></span> 

## <a name="transport-resilience"></a><span data-ttu-id="cffd0-150">Transport Ausfallsicherheit</span><span class="sxs-lookup"><span data-stu-id="cffd0-150">Transport Resilience</span></span> 
<span data-ttu-id="cffd0-p110">Exchange Online umfasst zwei primäre Transport Ausfallsicherheit-Features: Shadow-Redundanz und Sicherheitsnetz. Die Shadow-Redundanz behält eine redundante Kopie einer Nachricht bei der Übertragung bei. Das Sicherheitsnetz speichert eine redundante Kopie einer Nachricht, nachdem die Nachricht erfolgreich zugestellt wurde.</span><span class="sxs-lookup"><span data-stu-id="cffd0-p110">Exchange Online includes two primary transport resilience features: Shadow Redundancy and Safety Net. Shadow Redundancy keeps a redundant copy of a message while it is in transit. Safety Net keeps a redundant copy of a message after the message is successfully delivered.</span></span> 

<span data-ttu-id="cffd0-p111">Bei der Shadow-Redundanz erstellt jeder Exchange Online-Transport Server eine Kopie der einzelnen Nachrichten, die er empfängt, bevor er den erfolgreichen Empfang der Nachricht an den sendenden Server bestätigt. Dadurch werden alle Nachrichten in der Transportpipeline während der Übertragung redundant. Wenn Exchange Online feststellt, dass die ursprüngliche Nachricht während der Übertragung verloren gegangen ist, wird eine redundante Kopie der Nachricht erneut übermittelt.</span><span class="sxs-lookup"><span data-stu-id="cffd0-p111">With Shadow Redundancy, each Exchange Online transport server makes a copy of each messages it receives before it acknowledges successfully receiving the message to the sending server. This makes all messages in the transport pipeline redundant while in transit. If Exchange Online determines the original message was lost in transit, a redundant copy of the message is redelivered.</span></span> 

<span data-ttu-id="cffd0-p112">Sicherheitsnetz ist eine Transportwarteschlange, die dem Transportdienst auf einem Postfachserver zugeordnet ist. In dieser Warteschlange werden Kopien von Nachrichten gespeichert, die vom Server erfolgreich verarbeitet wurden. Wenn für eine Postfachdatenbank oder einen Serverfehler die Aktivierung einer veralteten Kopie der Postfachdatenbank erforderlich ist, werden Nachrichten in der Sicherheitsnetz Warteschlange automatisch erneut an die neue aktive Kopie der Postfachdatenbank übermittelt. Das Sicherheitsnetz ist ebenfalls redundant, wodurch der Transport nicht als einziger Punkt des Fehlers verhindert wird. Es verwendet das Konzept eines primären Sicherheitsnetzes und ein Shadow-Sicherheitsnetz, wenn das primäre Sicherheitsnetz für mehr als 12 Stunden nicht verfügbar ist, Resubmit-Anforderungen zu Shadow Resubmit-Anforderungen werden und Nachrichten aus dem Shadow-Sicherheitsnetz erneut zugestellt werden.</span><span class="sxs-lookup"><span data-stu-id="cffd0-p112">Safety Net is a transport queue that is associated with the Transport service on a Mailbox server. This queue stores copies of messages that were successfully processed by the server. When a mailbox database or server failure requires activating an out-of-date copy of the mailbox database, messages in the Safety Net queue are automatically resubmitted to the new active copy of the mailbox database. Safety Net is also redundant, thereby eliminating transport as a single point of failure. It uses the concept of a Primary Safety Net and a Shadow Safety Net wherein if the Primary Safety Net is unavailable for more than 12 hours, resubmit requests become shadow resubmit requests, and messages are re-delivered from the Shadow Safety Net.</span></span>

<span data-ttu-id="cffd0-p113">Die erneute Übermittlung von nachRichten aus dem Sicherheitsnetz wird automatisch von der Active Manager-Komponente des Microsoft Exchange-Replikationsdiensts initiiert, die DAGs und Postfachdatenbankkopien verwaltet. Es sind keine manuellen Aktionen erforderlich, um Nachrichten aus dem Sicherheitsnetz erneut zu übermitteln.</span><span class="sxs-lookup"><span data-stu-id="cffd0-p113">Message resubmissions from Safety Net are automatically initiated by the Active Manager component of the Microsoft Exchange Replication service that manages DAGs and mailbox database copies. No manual actions are required to resubmit messages from Safety Net.</span></span> 

## <a name="single-bit-correction"></a><span data-ttu-id="cffd0-164">Korrektur für ein einzelnes Bit</span><span class="sxs-lookup"><span data-stu-id="cffd0-164">Single Bit Correction</span></span> 
<span data-ttu-id="cffd0-p114">ESE enthält einen Mechanismus zum Aufspüren und Auflösen von Single-Bit-CRC-Fehlern (aka Single-Bit-Flips), die das Ergebnis von Hardwarefehlern sind (und als solche physische Beschädigungen darstellen). Wenn diese Fehler auftreten, korrigiert ESE Sie automatisch und protokolliert ein Ereignis im Ereignisprotokoll.</span><span class="sxs-lookup"><span data-stu-id="cffd0-p114">ESE includes a mechanism to detect and resolve single-bit CRC errors (aka single-bit flips) that are the result of hardware errors (and as such they represent physical corruption). When these errors occur, ESE automatically corrects them and logs an event in the event log.</span></span> 

## <a name="online-database-scanning"></a><span data-ttu-id="cffd0-167">Online Datenbank-überPrüfung</span><span class="sxs-lookup"><span data-stu-id="cffd0-167">Online Database Scanning</span></span> 
<span data-ttu-id="cffd0-p115">Bei der Online Datenbank-Überprüfung (auch bekannt als *Datenbankprüfsumme*) handelt es sich um den Prozess, bei dem eine ESE eine Datenbankkonsistenzprüfung verwendet, um jede Seite zu lesen und auf die Seite zu prüfen. Der primäre Zweck besteht darin, physische Beschädigungen zu erkennen und Leerräume zu verlieren, die möglicherweise nicht durch transaktionale Vorgänge erkannt werden. Bei der Datenbanküberprüfung werden auch Absturz Vorgänge nach dem Speichern ausgeführt. Speicherplatz kann aufgrund von Abstürzen geleckt werden, und die Online-Datenbanküberprüfung findet und gewinnt verlorenen Speicherplatz. Das System hat die Erwartung, dass jede Datenbank alle sieben Tage vollständig überprüft wird.</span><span class="sxs-lookup"><span data-stu-id="cffd0-p115">Online database scanning (also known as *database checksumming*) is the process where an ESE uses a database consistency checker to read each page and check for page corruption. The primary purpose is to detect physical corruption and lost flushes that may not be getting detected by transactional operations. Database scanning also performs post-store crash operations. Space can be leaked due to crashes, and online database scanning finds and recovers lost space. The system is designed with the expectation that every database is fully scanned once every seven days.</span></span> 

## <a name="lost-flush-detection"></a><span data-ttu-id="cffd0-173">Erkennung verlorener Flush</span><span class="sxs-lookup"><span data-stu-id="cffd0-173">Lost Flush Detection</span></span> 
<span data-ttu-id="cffd0-p116">Ein Verlust Flush tritt auf, wenn ein Datenbankschreibvorgang, bei dem das Datenträgersubsystem/-Betriebssystem als abgeschlossen zurückgegeben wurde, nicht tatsächlich auf den Datenträger geschrieben oder am falschen Speicherort geschrieben wurde. Verloren geGangene Flush-Vorfälle können zu Daten Bank logischen Beschädigungen führen, um zu verhindern, dass verlorene Leerräume zu Datenverlusten führt, enthält ESE einen Mechanismus zur Erkennung verlorener Nachweise. Wenn Datenbankseiten in passive Kopien geschrieben werden, wird eine Prüfung für verlorene Leerräume in der aktiven Kopie durchgeführt. Wenn ein verlorenes Flush erkannt wird, kann ESE den Prozess mithilfe eines Seiten-Patchings reparieren.</span><span class="sxs-lookup"><span data-stu-id="cffd0-p116">A lost flush occurs when a database write operation that the disk subsystem/operating system returned as completed did not actually get written to disk, or was written in the wrong location. Lost flush incidents can result in database logical corruption, so to prevent lost flushes from resulting in lost data, ESE includes a lost flush detection mechanism. As database pages are written to passive copies, a check is performed for lost flushes on the active copy. If a lost flush is detected, ESE can repair the process using a page patching process.</span></span> 

## <a name="single-page-restore"></a><span data-ttu-id="cffd0-178">Wiederherstellung einzelner Seiten</span><span class="sxs-lookup"><span data-stu-id="cffd0-178">Single Page Restore</span></span> 
<span data-ttu-id="cffd0-p117">Single Page Restore, Alias *Page Patching*, ist ein automatischer Prozess, bei dem beschädigte Datenbankseiten durch gesunde Kopien von einem gesunden Replikat ersetzt werden. Der Reparaturprozess für eine beschädigte Seite hängt davon ab, ob die Datenbankkopie aktiv oder passiv ist. Wenn eine aktive Datenbankkopie eine beschädigte Seite findet, kann Sie eine Seite aus einem Replikat kopieren, sofern die Seite vollständig auf dem neuesten Stand ist. Dies wird erreicht, indem eine Anforderung für die Seite in den Protokolldatenstrom eingefügt wird, der die Grundlage für die Replikation der Postfachdatenbank ist. Sobald ein Replikat auf die Seitenanforderung trifft, sendet es eine Kopie der Seite an die anfordernde Datenbankkopie. Die Wiederherstellung einzelner Seiten stellt auch einen asynchronen Kommunikationsmechanismus für die aktive zum Anfordern einer Seite aus Replikaten bereit, auch wenn die Replikate derzeit offline sind.</span><span class="sxs-lookup"><span data-stu-id="cffd0-p117">Single page restore, aka *page patching*, is an automatic process where corrupt database pages are replaced by healthy copies from a healthy replica. The repair process for a corrupt page depends on whether the database copy is active or passive. When an active database copy encounters a corrupted page, it can copy a page from one of its replicas, provided the page it copies is completely up-to-date. This is accomplished by putting a request for the page into the log stream, which is the basis of mailbox database replication. As soon as a replica encounters the page request it responds by sending a copy of the page to the requesting database copy. Single page restore also provides an asynchronous communication mechanism for the active to request a page from replicas, even if the replicas are currently offline.</span></span> 

<span data-ttu-id="cffd0-p118">Bei Beschädigungen in einer passiven Datenbankkopie, einschließlich einer verzögerten Datenbankkopie, da sich diese Kopien immer hinter der aktiven Kopie befinden, ist es immer sicher, eine Seite aus der aktiven Kopie in eine passive Kopie zu kopieren. Eine passive Datenbankkopie ist von Natur aus hoch verfügbar, sodass das Wiedergeben von Protokollen während des Seiten-Patchings angehalten wird, aber der Protokollkopiervorgang wird fortgesetzt. Die passive Datenbankkopie Ruft eine Kopie der beschädigten Seite aus der aktiven Kopie ab, wartet, bis die Protokolldatei, die die maximale erforderliche Protokoll Generierungs Anforderung erfüllt, kopiert und überprüft wird, und dann die beschädigte Seite Patches. Sobald die Seite gepatcht wurde, wird die Protokollwiedergabe fortgesetzt. Der Prozess ist für die verzögerte Datenbankkopie identisch, mit dem Unterschied, dass die verzögerte Datenbank zunächst alle Protokolldateien wiedergibt, die zum Erreichen eines patchable-Status erforderlich sind.</span><span class="sxs-lookup"><span data-stu-id="cffd0-p118">In case of corruption in a passive database copy, including a lagged database copy, because these copies are always behind their active copy, it is always safe to copy any page from the active copy to a passive copy. A passive database copy is by nature highly available, so during the page patching process, log replaying is suspended, but log copying continues. The passive database copy retrieves a copy of the corrupted page from the active copy, waits until the log file which meets the maximum required log generation requirement is copied and inspected, and then patches the corrupt page. Once the page has been patched, log replay resumes. The process is the same for the lagged database copy, except that the lagged database first replays all log files that are necessary to achieve a patchable state.</span></span> 

## <a name="mailbox-replication-service"></a><span data-ttu-id="cffd0-190">Postfachreplikationsdienst</span><span class="sxs-lookup"><span data-stu-id="cffd0-190">Mailbox Replication Service</span></span> 
<span data-ttu-id="cffd0-p119">Das Verschieben von Postfächern ist ein wichtiger Teil der Verwaltung eines großen e-Mail-Diensts. Es gibt immer aktualisierte Technologien und Hardware-und Versions-Upgrades, um mit einem stabilen, gedrosselten System zu arbeiten, das es unseren Ingenieuren ermöglicht, diese Aufgabe zu bewältigen, und gleichzeitig die Postfachverschiebungen für Benutzer transparent zu halten (indem Sie sicherstellen, dass Sie online bleiben. während des gesamten Prozesses) ist der Schlüssel und stellt sicher, dass der Prozess ordnungsgemäß skaliert werden, wenn Postfächer größer und größer werden.</span><span class="sxs-lookup"><span data-stu-id="cffd0-p119">Moving mailboxes is a key part of managing a large-scale email service. There are always updated technologies and hardware and version upgrades to deal with, so having a robust, throttled system that enables our engineers to accomplish this work while keeping the mailbox moves transparent to users (by making sure they stay online throughout the process) is key and making sure that the process scales up gracefully as mailboxes get larger and larger.</span></span> 

<span data-ttu-id="cffd0-p120">Der Exchange-Postfachreplikationsdienst (MRS) ist für das Verschieben von Postfächern zwischen Datenbanken zuständig. Während der Verschiebung führt MRS eine Konsistenzprüfung für alle Elemente innerhalb des Postfachs durch. Wenn ein Konsistenzproblem gefunden wird, wird MRS entweder das Problem beheben oder die beschädigten Elemente überspringen, wodurch die Beschädigung aus dem Postfach entfernt wird.</span><span class="sxs-lookup"><span data-stu-id="cffd0-p120">The Exchange Mailbox Replication Service (MRS) is responsible for moving mailboxes between databases. During the move, MRS performs a consistency check on all items within the mailbox. If a consistency issue is found, MRS will either correct the problem, or skip the corrupted items, thereby removing the corruption from the mailbox.</span></span> 

<span data-ttu-id="cffd0-p121">Da MRS eine Komponente von Exchange Online ist, können wir Änderungen am Code vornehmen, um neue Formen der Beschädigung zu beheben, die in der Zukunft erkannt werden. Wenn beispielsweise ein Konsistenzproblem festgestellt wird, das MRS nicht beheben kann, können wir die Beschädigung analysieren, den MRS-Code ändern und die Inkonsistenz korrigieren (wenn wir verstehen, wie).</span><span class="sxs-lookup"><span data-stu-id="cffd0-p121">Because MRS is a component of Exchange Online, we can make changes in its code to address new forms of corruption that are detected in the future. For example, if we detect a consistency issue that MRS is not able to fix, we can analyze the corruption, change the MRS code and correct the inconsistency (if we understand how to).</span></span> 

## <a name="log-file-checks"></a><span data-ttu-id="cffd0-198">Protokolldatei Prüfungen</span><span class="sxs-lookup"><span data-stu-id="cffd0-198">Log File Checks</span></span> 
<span data-ttu-id="cffd0-p122">Alle Transaktionsprotokolldateien, die von einer Exchange-Datenbank generiert werden, unterliegen verschiedenen Arten von Konsistenzprüfungen. Wenn eine Protokolldatei erstellt wird, ist zunächst ein Bitmuster geschrieben und dann eine Reihe von Protokollschreib Vorgängen ausgeführt. Auf diese Weise kann Exchange Online eine Reihe von Prüfungen durchführen (Verlust von Flush, CRC und anderen Prüfungen), um jede Protokolldatei so zu validieren, wie Sie geschrieben wird, und wieder, wenn Sie repliziert wird.</span><span class="sxs-lookup"><span data-stu-id="cffd0-p122">All transaction log files generated by an Exchange database undergo several forms of consistency checks. When a log file is created, the first thing done is a bit pattern is written and then a series of log writes is performed. This enables Exchange Online to execute a series of checks (lost flush, CRC and other checks) to validate each log file as it is written, and again as it is replicated.</span></span> 

## <a name="deployment-on-resilient-file-system"></a><span data-ttu-id="cffd0-202">Bereitstellung auf einem stabilen Datei System</span><span class="sxs-lookup"><span data-stu-id="cffd0-202">Deployment on Resilient File System</span></span> 
<span data-ttu-id="cffd0-p123">Um zu verhindern, dass Beschädigungen auf Dateisystemebene auftreten, wird Exchange Online auf den systemeigenen ReFS-Partitionen bereitgestellt, um verbesserte Wiederherstellungsfunktionen bereitzustellen. ReFS ist ein Dateisystem in Windows Server 2012 und höher, das auf eine bessere Datenbeschädigung ausgelegt ist und dadurch die Verfügbarkeit und Integrität von Dateien maximiert. Insbesondere führt ReFS zu Verbesserungen in der Art und Weise, wie Metadaten aktualisiert werden, wodurch Daten besser geschützt und Daten beschädigt werden. Außerdem werden Prüfsummen verwendet, um die Integrität von Dateidaten und Metadaten zu überprüfen, um sicherzustellen, dass Datenbeschädigungen leicht gefunden und repariert werden können.</span><span class="sxs-lookup"><span data-stu-id="cffd0-p123">To help prevent corruption from occurring at the file system level, Exchange Online is being deployed on Resilient File System (ReFS) partitions to provide improved recovery capabilities. ReFS is a file system in Windows Server 2012 and later that is designed to be more resilient against data corruption thereby maximizing data availability and integrity. Specifically, ReFS brings improvements in the way that metadata is updated which offers better protection for data and reduces data corruption cases. It also uses checksums to verify the integrity of file data and metadata ensuring that data corruption is easily found and repaired.</span></span> 

<span data-ttu-id="cffd0-207">Exchange Online nutzt mehrere Vorteile von ReFS:</span><span class="sxs-lookup"><span data-stu-id="cffd0-207">Exchange Online takes advantage of several ReFS benefits:</span></span> 
- <span data-ttu-id="cffd0-p124">Mehr Ausfallsicherheit bei der Datenintegrität führt zu weniger Datenbeschädigungen. Das Verringern der Anzahl von Beschädigungs Vorfällen führt zu weniger unnötigen Daten Bank reseeds.</span><span class="sxs-lookup"><span data-stu-id="cffd0-p124">More resiliency in data integrity means fewer data corruption incidents. Reducing the number of corruption incidents means fewer unnecessary database reseeds.</span></span> 
- <span data-ttu-id="cffd0-210">PrüfSumme, die auf Metadaten ausgeführt wird, die eine schnellere und deterministische Entdeckung von Korruptionsfällen ermöglichen, sodass wir Kundendaten Beschädigungen beheben können, bevor graue Fehler auf Daten-Volumes auftreten.</span><span class="sxs-lookup"><span data-stu-id="cffd0-210">Checksum running on metadata enabling detections of corruption cases sooner and more deterministically, allowing us to fix customer data corruption before grey failures occur on data volumes.</span></span>
- <span data-ttu-id="cffd0-211">Entwickelt für eine gute Zusammenarbeit mit extrem großen Datasets – Petabyte und höher – ohne Leistungseinbußen</span><span class="sxs-lookup"><span data-stu-id="cffd0-211">Designed to work well with extremely large data sets—petabytes and larger—without performance impact</span></span>
- <span data-ttu-id="cffd0-212">Unterstützung für andere Features, die von Exchange Online verwendet werden, beispielsweise BitLocker-Verschlüsselung.</span><span class="sxs-lookup"><span data-stu-id="cffd0-212">Support for other features used by Exchange Online, such as BitLocker encryption.</span></span> 

<span data-ttu-id="cffd0-213">Exchange Online profitiert auch von anderen ReFS-Features:</span><span class="sxs-lookup"><span data-stu-id="cffd0-213">Exchange Online also benefits from other ReFS features:</span></span> 
- <span data-ttu-id="cffd0-p125">**Integrity (integrIty Streams)** -ReFS speichert Daten so, dass Sie vor vielen häufig auftretenden Fehlern geschützt werden, die normalerweise zu Datenverlusten führen können. Die Office 365-Suche verwendet IntegritätsDaten Ströme, um die Erkennung von Datenträgerbeschädigungen und Prüfsummen für Dateiinhalte zu erleichtern. Das Feature reduziert außerdem Beschädigungs Vorfälle durch "Torn Writes" (wenn ein Schreibvorgang aufgrund von Stromausfällen usw. nicht abgeschlossen wird).</span><span class="sxs-lookup"><span data-stu-id="cffd0-p125">**Integrity (Integrity Streams)** - ReFS stores data in a way that protects it from many of the common errors that can normally cause data loss. Office 365 Search uses Integrity Streams to help with early disk corruption detection and checksums of file content. The feature also reduces corruption incidents caused by “Torn Writes” (when a write operation does not complete due to power outages, etc.).</span></span> 
- <span data-ttu-id="cffd0-p126">**Verfügbarkeit (Bergungs-)** -ReFS priorisiert die Verfügbarkeit von Daten. Historisch gesehen waren Dateisysteme oft anfällig für Datenbeschädigungen, bei denen das System zur Reparatur offline geschaltet werden muss. Obwohl es selten ist, implementiert ReFS eine Bergungs Funktion, die die beschädigten Daten aus dem Namespace auf einem Live-Volume entfernt und sicherstellt, dass die fehlerhaften Daten nicht beeinträchtigt werden. Durch die Anwendung des Bergungs Features und die Isolierung von Datenbeschädigungen in Exchange Online-Datenbankdatenträgern können wir nicht betroffene Datenbanken zwischen dem Zeitpunkt der Beschädigung und der Reparaturaktion auf einem beschädigten Volume halten. Dadurch wird die Verfügbarkeit von Datenbanken erhöht, die normalerweise von derartigen Datenträgerbeschädigungen betroffen wären.</span><span class="sxs-lookup"><span data-stu-id="cffd0-p126">**Availability (Salvage)** - ReFS prioritizes the availability of data. Historically, file systems were often susceptible to data corruption that would require the system to be taken offline for repair. Although rare, if corruption does occur, ReFS implements salvage, a feature that removes the corrupt data from the namespace on a live volume and ensures that good data is not adversely affected by non-repairable corrupt data. Applying the Salvage feature and isolating data corruption to Exchange Online database volumes means that we can keep non-affected databases on a corrupted volume healthy between the time of corruption and repair action. This increases the availability of databases that would normally be affected by such disk corruption issues.</span></span> 