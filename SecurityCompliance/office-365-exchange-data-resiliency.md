---
title: Office 365 Exchange Datenflexibilität
ms.author: robmazz
author: robmazz
manager: laurawi
ms.date: 8/21/2018
audience: ITPro
ms.topic: article
ms.service: Office 365 Administration
localization_priority: None
search.appverid:
- MET150
ms.collection: Strat_O365_Enterprise
description: Eine Erklärung der verschiedenen Aspekte der datenflexibilität in Exchange Online und Office 365.
ms.openlocfilehash: 8d0448a95f010b766faf852a374513a1c2da61fa
ms.sourcegitcommit: 36c5466056cdef6ad2a8d9372f2bc009a30892bb
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/27/2018
ms.locfileid: "22529345"
---
# <a name="exchange-online-data-resiliency-in-office-365"></a><span data-ttu-id="c44ca-103">Exchange Online Datenflexibilität in Office 365</span><span class="sxs-lookup"><span data-stu-id="c44ca-103">Exchange Online Data Resiliency in Office 365</span></span>

## <a name="introduction"></a><span data-ttu-id="c44ca-104">Einführung</span><span class="sxs-lookup"><span data-stu-id="c44ca-104">Introduction</span></span>
<span data-ttu-id="c44ca-p101">Es gibt zwei Arten der Beschädigung, die eine Exchange-Datenbank beeinflussen: physische Beschädigung, was in der Regel (in bestimmten, Speicherhardware) Hardwareprobleme zurückzuführen ist, und logische Beschädigung, das eintritt, aufgrund von anderen Faktoren. Im Allgemeinen stehen zwei Arten von logischen Beschädigung, die innerhalb einer Exchange-Datenbank auftreten können:</span><span class="sxs-lookup"><span data-stu-id="c44ca-p101">There are two types of corruption that can affect an Exchange database: physical corruption, which is typically caused by hardware (in particular, storage hardware) problems, and logical corruption, which occurs due to other factors. Generally, there are two types of logical corruption that can occur within an Exchange database:</span></span> 
- <span data-ttu-id="c44ca-p102">**Logische Datenbankfehler** - Datenbank Seite Prüfsumme übereinstimmt, aber die Daten auf der Seite ist logisch falsch. Dies auftreten kann, wenn die Datenbank-Engine (die Extensible Storage Engine (ESE)) versucht, eine Datenbankseite geschrieben und, obwohl das Betriebssystem eine Erfolgsmeldung zurückgegeben, die Daten ist entweder nicht auf den Datenträger geschrieben oder in der falschen Stelle geschrieben. Dies wird als eine *flush verloren*bezeichnet. ESE enthält zahlreiche Features und Sicherheitsmaßnahmen, die entworfen wurden, um physische Beschädigung einer Datenbank und andere Datenverlust Szenarien zu verhindern. Um zu verhindern, dass verloren leert Datenverlust, enthält ESE einen Erkennungsmechanismus verloren flush-in der Datenbank sowie eine Funktion (einseitige wiederherstellen) korrigieren.</span><span class="sxs-lookup"><span data-stu-id="c44ca-p102">**Database logical corruption** - The database page checksum matches, but the data on the page is wrong logically. This can occur when the database engine (the Extensible Storage Engine (ESE)) attempts to write a database page and even though the operating system returns a success message, the data is either never written to the disk or it's written to the wrong place. This is referred to as a *lost flush*. ESE includes numerous features and safeguards that are designed to prevent physical corruption of a database and other data loss scenarios. To prevent lost flushes from losing data, ESE includes a lost flush detection mechanism in the database along with a feature (single page restore) to correct it.</span></span> 
- <span data-ttu-id="c44ca-p103">**Logische Beschädigung Store** - Daten wird hinzugefügt, gelöscht oder in eine Möglichkeit, das der Benutzer nicht geändert. Dieser Fälle werden in der Regel durch drittanbieteranwendungen verursacht. Es ist in der Regel nur eine Beschädigung insofern, als der Benutzer als eine Beschädigung anzeigt. Exchange-Speicher berücksichtigt die Transaktion, die logische Beschädigung, um eine Reihe von Operationen, gültige MAPI werden erstellt. Die [Compliance-Archiv](https://docs.microsoft.com/exchange/security-and-compliance/create-or-remove-in-place-holds) -Funktionen in Exchange Online bietet Schutz vor Store logische Beschädigung (, da es Inhalt verhindert, dass endgültig gelöscht werden, von einem Benutzer oder einer Anwendung).</span><span class="sxs-lookup"><span data-stu-id="c44ca-p103">**Store logical corruption** - Data is added, deleted, or manipulated in a way that the user doesn't expect. These cases are generally caused by third-party applications. It's generally only corruption in the sense that the user views it as corruption. The Exchange store considers the transaction that produced the logical corruption to be a series of valid MAPI operations. The [In-Place Hold](https://docs.microsoft.com/exchange/security-and-compliance/create-or-remove-in-place-holds) features in Exchange Online provides protection from store logical corruption (because it prevents content from being permanently deleted by a user or an application).</span></span> 

<span data-ttu-id="c44ca-p104">Exchange Online ausführt mehrere konsistenzprüfungen für replizierte Protokolldateien während der Prüfung der Protokolldateien und Protokollwiedergabe. Diese konsistenzprüfungen zu verhindern, dass physische Beschädigung aus, die vom System repliziert. Während der Überprüfung der Protokolldatei wird beispielsweise eine physische integritätsprüfung überprüft die Protokolldatei und überprüft, dass die in der Protokolldatei aufgezeichnete Prüfsumme im Arbeitsspeicher generierte Prüfsumme übereinstimmt. Darüber hinaus wird in der Kopfzeile untersucht, um sicherzustellen, dass die Signatur der Log-Datei in der Kopfzeile des Protokolls aufgezeichnet, die der Protokolldatei übereinstimmt. Während der Wiedergabe des Transaktionsprotokolls der Deklaration der Protokolldatei weitere Prüfung. Beispielsweise enthält Kopfzeile der Datenbank auch die Log-Signatur, das mit der Protokolldatei Signatur, um sicherzustellen, dass sie übereinstimmen verglichen wird.</span><span class="sxs-lookup"><span data-stu-id="c44ca-p104">Exchange Online performs several consistency checks on replicated log files during both log inspection and log replay. These consistency checks prevent physical corruption from being replicated by the system. For example, during log inspection, there is a physical integrity check which verifies the log file and validates that the checksum recorded in the log file matches the checksum generated in memory. In addition, the log file header is examined to make sure the log file signature recorded in the log header matches that of the log file. During log replay, the log file undergoes further scrutiny. For example, the database header also contains the log signature which is compared with the log file's signature to ensure they match.</span></span> 

<span data-ttu-id="c44ca-p105">Schutz gegen Beschädigung Postfachdaten in Exchange Online erfolgt mithilfe von Exchange Native Data Protection einer Strategie für die ausfallsicherheit, die auf Anwendungsebene Replikation auf mehreren Servern und mehreren Rechenzentren zusammen mit anderen nutzt Features, die Daten zu schützen aufgrund einer Beschädigung oder aus anderen Gründen verloren gehen. Dazu zählen systemeigene Funktionen, die von Microsoft oder der Exchange Online-Anwendung selbst, wie etwa verwaltet werden:</span><span class="sxs-lookup"><span data-stu-id="c44ca-p105">Protection against corruption of mailbox data in Exchange Online is achieved by using Exchange Native Data Protection, a resiliency strategy that leverages application-level replication across multiple servers and multiple datacenters along with other features that help protect data from being lost due to corruption or other reasons. These features include native features that are managed by Microsoft or the Exchange Online application itself, such as:</span></span>

- [<span data-ttu-id="c44ca-125">Daten-Verfügbarkeitsgruppen</span><span class="sxs-lookup"><span data-stu-id="c44ca-125">Data Availability Groups</span></span>](https://docs.microsoft.com/exchange/back-up-email)
- <span data-ttu-id="c44ca-126">Einzelnes Bit Korrektur</span><span class="sxs-lookup"><span data-stu-id="c44ca-126">Single Bit Correction</span></span> 
- <span data-ttu-id="c44ca-127">Überprüfen von Online-Datenbank</span><span class="sxs-lookup"><span data-stu-id="c44ca-127">Online Database Scanning</span></span> 
- <span data-ttu-id="c44ca-128">Flush Erkennung verloren</span><span class="sxs-lookup"><span data-stu-id="c44ca-128">Lost Flush Detection</span></span> 
- <span data-ttu-id="c44ca-129">Einzelne Seite wiederherstellen</span><span class="sxs-lookup"><span data-stu-id="c44ca-129">Single Page Restore</span></span> 
- <span data-ttu-id="c44ca-130">Mailbox Replication Service</span><span class="sxs-lookup"><span data-stu-id="c44ca-130">Mailbox Replication Service</span></span> 
- <span data-ttu-id="c44ca-131">Melden Sie sich eine Überprüfung auf Dateiebene</span><span class="sxs-lookup"><span data-stu-id="c44ca-131">Log File Checks</span></span> 
- <span data-ttu-id="c44ca-132">Bereitstellung auf Resilient File System</span><span class="sxs-lookup"><span data-stu-id="c44ca-132">Deployment on Resilient File System</span></span> 

<span data-ttu-id="c44ca-p106">Weitere Informationen zu den oben aufgeführten systemeigenen Funktionen klicken Sie auf die oben genannten Hyperlinks und finden Sie weiter unten für Weitere Informationen und Details auf Elemente ohne Hyperlinks. Zusätzlich zu diesen systemeigenen Funktionen enthält Exchange Online auch Daten Resiliency Features, die Kunden, wie etwa verwalten können:</span><span class="sxs-lookup"><span data-stu-id="c44ca-p106">For more information on the native features listed above, click on the above hyperlinks, and see below for additional information and for details on items without hyperlinks. In addition to these native features, Exchange Online also includes data resiliency features that customers can manage, such as:</span></span> 
- [<span data-ttu-id="c44ca-135">(Standardmäßig aktiviert) Wiederherstellung einzelner Elemente</span><span class="sxs-lookup"><span data-stu-id="c44ca-135">Single Item Recovery (enabled by default)</span></span>](https://docs.microsoft.com/exchange/recipients-in-exchange-online/manage-user-mailboxes/recover-deleted-messages) 
- [<span data-ttu-id="c44ca-136">In-Situ-Speicher und Beweissicherungsverfahren</span><span class="sxs-lookup"><span data-stu-id="c44ca-136">In-Place Hold and Litigation Hold</span></span>](https://docs.microsoft.com/exchange/security-and-compliance/in-place-and-litigation-holds) 
- [<span data-ttu-id="c44ca-137">Gelöschte Aufbewahrung von Elementen und Soft-Deleted Postfächer (beide standardmäßig aktiviert)</span><span class="sxs-lookup"><span data-stu-id="c44ca-137">Deleted Item Retention and Soft-Deleted Mailboxes (both enabled by default)</span></span>](https://docs.microsoft.com/exchange/recipients-in-exchange-online/delete-or-restore-mailboxes) 

## <a name="database-availability-groups"></a><span data-ttu-id="c44ca-138">Database Availability Groups</span><span class="sxs-lookup"><span data-stu-id="c44ca-138">Database Availability Groups</span></span> 
<span data-ttu-id="c44ca-p107">Jede Postfachdatenbank in Office 365 wird in einer [Database Availability Group (DAG)](https://docs.microsoft.com/exchange/back-up-email) gehostet und in geografisch getrennte Rechenzentren innerhalb desselben Bereichs repliziert. Die am häufigsten verwendete Konfiguration ist vier Datenbankkopien in vier Rechenzentren. Einige Regionen müssen jedoch weniger Rechenzentren (Datenbanken werden auf drei Rechenzentren in Indien und zwei Rechenzentren in Australien und Japan repliziert). Jedoch in allen Fällen jede Postfachdatenbank gibt es vier Kopien, die für mehrere Rechenzentren, um sicherzustellen, dass die Postfachdaten von Software, Hardware und sogar Datacenter mit Fehlern geschützt ist verteilt werden.</span><span class="sxs-lookup"><span data-stu-id="c44ca-p107">Every mailbox database in Office 365 is hosted in a [database availability group (DAG)](https://docs.microsoft.com/exchange/back-up-email) and replicated to geographically-separate datacenters within the same region. The most common configuration is four database copies in four datacenters; however, some regions have fewer datacenters (databases are replicated to three datacenters in India, and two datacenters in Australia and Japan). But in all cases, every mailbox database has four copies that are distributed across multiple datacenters, thereby ensuring that mailbox data is protected from software, hardware, and even datacenter failures.</span></span> 

<span data-ttu-id="c44ca-p108">Nicht genügend diese vier Kopien sind drei davon als hochverfügbare konfiguriert. Die vierte Kopie wird als eine [verzögerte Datenbankkopie](https://docs.microsoft.com/Exchange/high-availability/manage-ha/activate-lagged-db-copies)konfiguriert. Die verzögerte Datenbankkopie ist nicht für einzelne postfachwiederherstellung oder Element postfachwiederherstellung vorgesehen. Ihr Zweck ist einen Recovery-Mechanismus für das Ereignis seltenen systemweiten, nach einem schwerwiegenden Fehler logische Beschädigung bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="c44ca-p108">Out of these four copies, three of them are configured as highly available. The fourth copy is configured as a [lagged database copy](https://docs.microsoft.com/Exchange/high-availability/manage-ha/activate-lagged-db-copies). The lagged database copy is not intended for individual mailbox recovery or mailbox item recovery. Its purpose is to provide a recovery mechanism for the rare event of system-wide, catastrophic logical corruption.</span></span> 

<span data-ttu-id="c44ca-p109">Verzögerte Datenbankkopien in Exchange Online sind mit einer sieben Tagen Datei-wiedergabeverzögerung konfiguriert. Darüber hinaus ist Exchange Replay Lag-Manager anzugebende dynamische Protokoll Datei die Wiedergabe für verzögerte Kopien für die verzögerte Datenbankkopien automatische Reparatur und verwalten Wachstum der Datei zulassen aktiviert. Obwohl Datenbank verzögerte Kopien in Exchange Online verwendet werden, ist es wichtig zu verstehen, sind sie nicht garantiert Zeitpunkt-Sicherung. Verzögerte Datenbankkopien in Exchange Online haben Verfügbarkeit Schwellenwert in der Regel etwa 90 % aufgrund der Zeiträume, in dem der Datenträger, auf eine verzögerte Kopie durch Datenträgerfehler, die verzögerte Kopie eine hochverfügbare immer verloren ist (aufgrund von Automatische Wiedergabe), auch kopieren der Wiedergabewarteschlange Warteschlange als die Zeiträume, in dem die verzögerte Datenbankkopie Protokoll erneut erstellt wird.</span><span class="sxs-lookup"><span data-stu-id="c44ca-p109">Lagged database copies in Exchange Online are configured with a seven-day log file replay lag time. In addition, the Exchange Replay Lag Manager is enabled to provide dynamic log file play down for lagged copies to allow lagged database copies to self-repair and manage log file growth. Although lagged database copies are used in Exchange Online, it is important to understand that they are not a guaranteed point-in-time backup. Lagged database copies in Exchange Online have an availability threshold, typically around 90%, due to periods where the disk containing a lagged copy is lost due to disk failure, the lagged copy becoming a highly-available copy (due to automatic play down), as well as the periods where the lagged database copy is re-building the log replay queue.</span></span> 

## <a name="transport-resilience"></a><span data-ttu-id="c44ca-150">Transport von Standorten</span><span class="sxs-lookup"><span data-stu-id="c44ca-150">Transport Resilience</span></span> 
<span data-ttu-id="c44ca-p110">Exchange Online umfasst zwei primäre Transport von Standorten Features: Shadow-Redundanz und Sicherheitsnetz. Shadow-Redundanz hält eine redundante Kopie einer Nachricht, während sie während der Übertragung ist. Sicherheitsnetz hält eine redundante Kopie einer Nachricht, nachdem die Nachricht erfolgreich zugestellt wird.</span><span class="sxs-lookup"><span data-stu-id="c44ca-p110">Exchange Online includes two primary transport resilience features: Shadow Redundancy and Safety Net. Shadow Redundancy keeps a redundant copy of a message while it is in transit. Safety Net keeps a redundant copy of a message after the message is successfully delivered.</span></span> 

<span data-ttu-id="c44ca-p111">Mit Shadow-Redundanz wird jeder Exchange Online-Transport-Server eine Kopie der einzelnen Nachrichten, die er erhält, bevor es Elementarten erfolgreich empfangen der Nachricht an den absenderserver. Dadurch wird alle Nachrichten in der Transportpipeline unterwegs redundant. Exchange Online fest, dass die ursprüngliche Nachricht während der Übertragung verloren wurde, wird eine redundante Kopie der Nachricht erneut zugestellt.</span><span class="sxs-lookup"><span data-stu-id="c44ca-p111">With Shadow Redundancy, each Exchange Online transport server makes a copy of each messages it receives before it acknowledges successfully receiving the message to the sending server. This makes all messages in the transport pipeline redundant while in transit. If Exchange Online determines the original message was lost in transit, a redundant copy of the message is redelivered.</span></span> 

<span data-ttu-id="c44ca-p112">Sicherheitsnetz ist eine Transport-Warteschlange, die den Transportdienst auf einem Postfachserver zugeordnet ist. Diese Warteschlange Kopien der Nachrichten, die vom Server erfolgreich verarbeitet wurden. Wenn ein Postfach Datenbank- oder Fehler eine veraltete Kopie der Postfachdatenbank aktivieren erfordert, werden Nachrichten in der Warteschlange Sicherheitsnetz automatisch auf die neue aktive Kopie der Postfachdatenbank erneut übermittelt. Sicherheitsnetz ist auch redundant, sodass nicht Transport als eine einzelne Fehlerquelle. Es verwendet das Konzept der primären Sicherheitsnetz und ein Schatten Sicherheitsnetz in dem, wenn der primäre Sicherheitsnetz für mehr als 12 Stunden nicht verfügbar ist, erneut zu übermitteln Anfragen werden Schatten zur erneuten Übermittlung Anforderungen, und Nachrichten aus den Schatten Safety Net erneut übermittelt werden.</span><span class="sxs-lookup"><span data-stu-id="c44ca-p112">Safety Net is a transport queue that is associated with the Transport service on a Mailbox server. This queue stores copies of messages that were successfully processed by the server. When a mailbox database or server failure requires activating an out-of-date copy of the mailbox database, messages in the Safety Net queue are automatically resubmitted to the new active copy of the mailbox database. Safety Net is also redundant, thereby eliminating transport as a single point of failure. It uses the concept of a Primary Safety Net and a Shadow Safety Net wherein if the Primary Safety Net is unavailable for more than 12 hours, resubmit requests become shadow resubmit requests, and messages are re-delivered from the Shadow Safety Net.</span></span>

<span data-ttu-id="c44ca-p113">Das erneute senden Nachrichten aus Safety Net werden automatisch von der Komponente Active Manager von der Microsoft Exchange-Replikationsdienst, die DAGs und Postfach verwaltet initiiert Datenbankkopien. Keine manuellen Aktionen sind erforderlich, um Nachrichten aus Safety Net erneut zu übermitteln.</span><span class="sxs-lookup"><span data-stu-id="c44ca-p113">Message resubmissions from Safety Net are automatically initiated by the Active Manager component of the Microsoft Exchange Replication service that manages DAGs and mailbox database copies. No manual actions are required to resubmit messages from Safety Net.</span></span> 

## <a name="single-bit-correction"></a><span data-ttu-id="c44ca-164">Einzelnes Bit Korrektur</span><span class="sxs-lookup"><span data-stu-id="c44ca-164">Single Bit Correction</span></span> 
<span data-ttu-id="c44ca-p114">ESE enthält einen Mechanismus zum Erkennen und lösen Sie Einzel-Bit-CRC-Fehler (auch bekannt als kippt Einzel-Bit), die das Ergebnis der Hardwarefehler sind (und als solche sie physische Beschädigung darstellen). Wenn diese Fehler auftreten, wird ESE automatisch korrigiert diese und im Ereignisprotokoll ein Ereignis protokolliert.</span><span class="sxs-lookup"><span data-stu-id="c44ca-p114">ESE includes a mechanism to detect and resolve single-bit CRC errors (aka single-bit flips) that are the result of hardware errors (and as such they represent physical corruption). When these errors occur, ESE automatically corrects them and logs an event in the event log.</span></span> 

## <a name="online-database-scanning"></a><span data-ttu-id="c44ca-167">Überprüfen von Online-Datenbank</span><span class="sxs-lookup"><span data-stu-id="c44ca-167">Online Database Scanning</span></span> 
<span data-ttu-id="c44ca-p115">Online-Datenbank (auch bekannt als *Datenbank Prüfsumme*) Scannen bezeichnet den Vorgang, in dem eine ESE eine Datenbank konsistenzüberprüfung auf jeder Seite lesen und überprüfen Sie für eine Beschädigung der Seite zu. Der primäre Zweck ist zum Erkennen von physische Beschädigung und verlorenen geleert, die nicht vom transaktionale Vorgänge erkannt erste werden können. Überprüfung der Datenbank führt auch nach der Store Absturz Vorgänge. Leerzeichen kann aufgrund von Abstürzen verloren werden, und online-Datenbank untersucht gesucht und verlorenen Speicherplatz wiederhergestellt. Das System wird unter der Annahme so konzipiert, dass alle sieben Tage vollständig in jeder Datenbank überprüft wird.</span><span class="sxs-lookup"><span data-stu-id="c44ca-p115">Online database scanning (also known as *database checksumming*) is the process where an ESE uses a database consistency checker to read each page and check for page corruption. The primary purpose is to detect physical corruption and lost flushes that may not be getting detected by transactional operations. Database scanning also performs post-store crash operations. Space can be leaked due to crashes, and online database scanning finds and recovers lost space. The system is designed with the expectation that every database is fully scanned once every seven days.</span></span> 

## <a name="lost-flush-detection"></a><span data-ttu-id="c44ca-173">Flush Erkennung verloren</span><span class="sxs-lookup"><span data-stu-id="c44ca-173">Lost Flush Detection</span></span> 
<span data-ttu-id="c44ca-p116">Eine Bereinigung verlorene tritt auf, wenn ein Schreibvorgang für Datenbank, die dem Subsystem Datenträger/Betriebssystem zurückgegeben wird, als abgeschlossen nicht tatsächlich in geschrieben wurden auf dem Datenträger oder in den falschen Speicherort geschrieben wurde. Flush Vorfälle verloren können Ergebnis in logischen datenbankbeschädigung, also so verhindern Sie, dass verloren leert resultierenden Daten verloren gehen, ESE enthält einen verlorenen flush Erkennungsmechanismus. Wie Datenbankseiten in passiven Kopien geschrieben werden, erfolgt eine Überprüfung für verloren leert in der aktiven Kopie. Wenn eine Bereinigung verlorene erkannt wird, kann ESE den Prozess, indem eine Seite patchingprozess reparieren.</span><span class="sxs-lookup"><span data-stu-id="c44ca-p116">A lost flush occurs when a database write operation that the disk subsystem/operating system returned as completed did not actually get written to disk, or was written in the wrong location. Lost flush incidents can result in database logical corruption, so to prevent lost flushes from resulting in lost data, ESE includes a lost flush detection mechanism. As database pages are written to passive copies, a check is performed for lost flushes on the active copy. If a lost flush is detected, ESE can repair the process using a page patching process.</span></span> 

## <a name="single-page-restore"></a><span data-ttu-id="c44ca-178">Einzelne Seite wiederherstellen</span><span class="sxs-lookup"><span data-stu-id="c44ca-178">Single Page Restore</span></span> 
<span data-ttu-id="c44ca-p117">Einseitige wiederherstellen, auch bekannt als *Patchen*, läuft automatisch ab, in dem beschädigt Datenbankseiten durch fehlerfreie Kopien aus einer fehlerfreien Replikat ersetzt werden. Der Reparatur für eine beschädigte Seite hängt davon ab, ob die Datenbankkopie aktiv oder Passiv ist. Wenn eine Kopie der aktiven Datenbank eine beschädigte Seite stößt, können sie eine Seite eines seiner Replikate kopieren, sofern die Seite, kopiert vollständig auf dem neuesten Stand ist. Dies wird durch die Protokollstream, der Grundlage für die Postfach-Datenbankreplikation ist eine Anforderung für die Seite Inbetriebnahme erreicht. Sobald ein Replikat der angeforderte Seite erkannt wird durch Senden einer Kopie der Seite an den anfordernden Datenbankkopie reagiert. Einseitige Wiederherstellen bietet auch einen asynchronen Kommunikationsmechanismus für das aktive zum Anfordern einer Seite von Replikate, selbst wenn die Replikate momentan offline sind.</span><span class="sxs-lookup"><span data-stu-id="c44ca-p117">Single page restore, aka *page patching*, is an automatic process where corrupt database pages are replaced by healthy copies from a healthy replica. The repair process for a corrupt page depends on whether the database copy is active or passive. When an active database copy encounters a corrupted page, it can copy a page from one of its replicas, provided the page it copies is completely up-to-date. This is accomplished by putting a request for the page into the log stream, which is the basis of mailbox database replication. As soon as a replica encounters the page request it responds by sending a copy of the page to the requesting database copy. Single page restore also provides an asynchronous communication mechanism for the active to request a page from replicas, even if the replicas are currently offline.</span></span> 

<span data-ttu-id="c44ca-p118">Im Falle einer Beschädigung in eine passive Datenbankkopie einschließlich eine verzögerte Datenbankkopie, da diese Kopien immer hinter die aktive Kopie sind, es ist sicherer, eine beliebige Seite aus der aktiven Kopie in eine passive Kopie zu kopieren. Eine passive Datenbankkopie ist grundsätzlich hochverfügbare, damit während der Seite patchingprozess Wiedergabe von Protokolldateien angehalten wird, aber weiterhin kopieren. Die passive Datenbankkopie Ruft eine Kopie der beschädigten Seite aus der aktiven Kopie, wartet, bis die Protokolldatei die maximale erforderlichen Protokolldateien Generation Anforderung erfüllt wird kopiert und geprüft und klicken Sie dann die beschädigte Seite patches. Nachdem die Seite gepatcht wurde, werden die Protokollwiedergabe fortgesetzt. Der Prozess ist für die verzögerte Datenbankkopie identisch, außer dass die verzögerte Datenbank zunächst alle Protokolldateien, die erforderlich sind gibt, um einen patchable Zustand zu erreichen sind.</span><span class="sxs-lookup"><span data-stu-id="c44ca-p118">In case of corruption in a passive database copy, including a lagged database copy, because these copies are always behind their active copy, it is always safe to copy any page from the active copy to a passive copy. A passive database copy is by nature highly available, so during the page patching process, log replaying is suspended, but log copying continues. The passive database copy retrieves a copy of the corrupted page from the active copy, waits until the log file which meets the maximum required log generation requirement is copied and inspected, and then patches the corrupt page. Once the page has been patched, log replay resumes. The process is the same for the lagged database copy, except that the lagged database first replays all log files that are necessary to achieve a patchable state.</span></span> 

## <a name="mailbox-replication-service"></a><span data-ttu-id="c44ca-190">Mailbox Replication Service</span><span class="sxs-lookup"><span data-stu-id="c44ca-190">Mailbox Replication Service</span></span> 
<span data-ttu-id="c44ca-p119">Verschieben von Postfächern ist ein wichtiger Teil der Verwaltung umfangreicher-e-Mail-Dienst. Es sind immer aktualisierte Technologien und Hardware- und Version Upgrades für den Umgang mit, damit eine robuste, dass gedrosselt System, unsere Ingenieure in Arbeit und das Postfach weiterhin durchführen können, verschoben transparent für Benutzer (indem sichergestellt wird, dass sie online bleiben über den gesamten Prozess) ist Schlüssel und es wird sichergestellt, dass der Prozess wird ordnungsgemäß skaliert, wie Postfächer je mehr erhalten möchten.</span><span class="sxs-lookup"><span data-stu-id="c44ca-p119">Moving mailboxes is a key part of managing a large-scale email service. There are always updated technologies and hardware and version upgrades to deal with, so having a robust, throttled system that enables our engineers to accomplish this work while keeping the mailbox moves transparent to users (by making sure they stay online throughout the process) is key and making sure that the process scales up gracefully as mailboxes get larger and larger.</span></span> 

<span data-ttu-id="c44ca-p120">Gruppenrichtlinien-Verwaltungskonsole (Exchange Postfach Replication Service, MRS) ist verantwortlich für das Verschieben von Postfächern zwischen Datenbanken. Während des Verschiebens führt MRS eine konsistenzprüfung für alle Elemente innerhalb des Postfachs an. Wenn ein Problem Konsistenz gefunden wird, wird MRS wird entweder das Problem zu beheben oder beschädigte Elemente, überspringen, wodurch Beschädigung aus dem Postfach entfernt.</span><span class="sxs-lookup"><span data-stu-id="c44ca-p120">The Exchange Mailbox Replication Service (MRS) is responsible for moving mailboxes between databases. During the move, MRS performs a consistency check on all items within the mailbox. If a consistency issue is found, MRS will either correct the problem, or skip the corrupted items, thereby removing the corruption from the mailbox.</span></span> 

<span data-ttu-id="c44ca-p121">Da MRS eine Komponente von Exchange Online ist, können wir in ihrem Code Adresse neuer Formulare der Beschädigung ändern, die in der Zukunft erkannt werden. Beispielsweise wenn wir ein Problem Konsistenz, die MRS nicht beheben kann erkennen, wir können Beschädigung zu analysieren, ändern Sie den Code MRS und korrigieren Sie die Inkonsistenz (Wenn wir wissen, wie Sie).</span><span class="sxs-lookup"><span data-stu-id="c44ca-p121">Because MRS is a component of Exchange Online, we can make changes in its code to address new forms of corruption that are detected in the future. For example, if we detect a consistency issue that MRS is not able to fix, we can analyze the corruption, change the MRS code and correct the inconsistency (if we understand how to).</span></span> 

## <a name="log-file-checks"></a><span data-ttu-id="c44ca-198">Melden Sie sich eine Überprüfung auf Dateiebene</span><span class="sxs-lookup"><span data-stu-id="c44ca-198">Log File Checks</span></span> 
<span data-ttu-id="c44ca-p122">Alle Transaktionsprotokolldateien von einer Exchange-Datenbank generierte unterzogen werden mehrere konsistenzprüfungen. Wenn eine Protokolldatei erstellt wird, ist die erstes fertig ein Bitmuster wird geschrieben, und klicken Sie dann eine Reihe von Schreibvorgängen durchgeführt wird. Auf diese Weise können Exchange Online zum Ausführen einer Reihe von überprüft, ob (verloren Flush, CRC und andere überprüft), um jeder Protokolldatei zu überprüfen, wie er geschrieben wurde, und klicken Sie erneut, während sie repliziert werden.</span><span class="sxs-lookup"><span data-stu-id="c44ca-p122">All transaction log files generated by an Exchange database undergo several forms of consistency checks. When a log file is created, the first thing done is a bit pattern is written and then a series of log writes is performed. This enables Exchange Online to execute a series of checks (lost flush, CRC and other checks) to validate each log file as it is written, and again as it is replicated.</span></span> 

## <a name="deployment-on-resilient-file-system"></a><span data-ttu-id="c44ca-202">Bereitstellung auf Resilient File System</span><span class="sxs-lookup"><span data-stu-id="c44ca-202">Deployment on Resilient File System</span></span> 
<span data-ttu-id="c44ca-p123">Um eine Beschädigung auftritt auf Dateiebene System zu verhindern, ist Exchange Online auf Partitionen anzugebende verbesserte Wiederherstellungsfunktionen ausfallsichere File System (ReFS) bereitgestellt wird. ReFS ist ein Dateisystem in Windows Server 2012 und höher, das vor Beschädigung der Daten und Maximierung der Verfügbarkeit und Integrität ausfallsicherer werden soll. Insbesondere bringt ReFS Verbesserungen in die Möglichkeit, Metadaten wird aktualisiert, die bietet einen besseren Schutz für Daten und verringert die Daten beschädigt sind. Verwendet auch Prüfsumme zum Überprüfen der Integrität von Daten und Metadaten, eine Beschädigung der Daten zu gewährleisten, dass einfach gefunden und repariert.</span><span class="sxs-lookup"><span data-stu-id="c44ca-p123">To help prevent corruption from occurring at the file system level, Exchange Online is being deployed on Resilient File System (ReFS) partitions to provide improved recovery capabilities. ReFS is a file system in Windows Server 2012 and later that is designed to be more resilient against data corruption thereby maximizing data availability and integrity. Specifically, ReFS brings improvements in the way that metadata is updated which offers better protection for data and reduces data corruption cases. It also uses checksums to verify the integrity of file data and metadata ensuring that data corruption is easily found and repaired.</span></span> 

<span data-ttu-id="c44ca-207">Exchange Online nutzt mehrere ReFS Vorteile:</span><span class="sxs-lookup"><span data-stu-id="c44ca-207">Exchange Online takes advantage of several ReFS benefits:</span></span> 
- <span data-ttu-id="c44ca-p124">Weitere Resiliency Datenintegrität bedeutet weniger Daten Beschädigung Vorfälle. Reduzieren der Anzahl der Beschädigung Vorfälle bedeutet weniger Datenbank unnötig Seeding nützlich.</span><span class="sxs-lookup"><span data-stu-id="c44ca-p124">More resiliency in data integrity means fewer data corruption incidents. Reducing the number of corruption incidents means fewer unnecessary database reseeds.</span></span> 
- <span data-ttu-id="c44ca-210">Auf Metadaten Aktivieren der Erkennung von beschädigt sind schneller und mehr deterministisch, da wir So korrigieren Sie Kundendaten mit Prüfsumme Beschädigung, bevor auf Inhaltsdaten graue Fehler auftreten.</span><span class="sxs-lookup"><span data-stu-id="c44ca-210">Checksum running on metadata enabling detections of corruption cases sooner and more deterministically, allowing us to fix customer data corruption before grey failures occur on data volumes.</span></span>
- <span data-ttu-id="c44ca-211">Sehr große Datenmengen gut entwickelt – Kostenfaktor und größere – ohne Auswirkung auf die Leistung</span><span class="sxs-lookup"><span data-stu-id="c44ca-211">Designed to work well with extremely large data sets—petabytes and larger—without performance impact</span></span>
- <span data-ttu-id="c44ca-212">Unterstützung für andere Features von Exchange Online, wie BitLocker-Verschlüsselung verwendet.</span><span class="sxs-lookup"><span data-stu-id="c44ca-212">Support for other features used by Exchange Online, such as BitLocker encryption.</span></span> 

<span data-ttu-id="c44ca-213">Exchange Online bietet auch von anderen Features ReFS Vorteile:</span><span class="sxs-lookup"><span data-stu-id="c44ca-213">Exchange Online also benefits from other ReFS features:</span></span> 
- <span data-ttu-id="c44ca-p125">**Integrität (Integrität Datenströme)** - ReFS speichert die Daten in eine Möglichkeit, die es viele häufige Fehler schützt, die normalerweise von Datenverlusten führen können. Office 365-Suche verwendet Integrität Datenströme frühe Datenträger Beschädigung Erkennung und Prüfsumme der Inhalt der Datei zu unterstützen. Das Feature wird auch eine Beschädigung Vorfälle aufgrund von "Zerrissenes schreibt" (wenn ein Schreibvorgang nicht abgeschlossen wurde aufgrund von Stromausfall usw..) reduziert.</span><span class="sxs-lookup"><span data-stu-id="c44ca-p125">**Integrity (Integrity Streams)** - ReFS stores data in a way that protects it from many of the common errors that can normally cause data loss. Office 365 Search uses Integrity Streams to help with early disk corruption detection and checksums of file content. The feature also reduces corruption incidents caused by “Torn Writes” (when a write operation does not complete due to power outages, etc.).</span></span> 
- <span data-ttu-id="c44ca-p126">**Verfügbarkeit (Restwert)** – ReFS priorisiert die Verfügbarkeit der Daten. In der Vergangenheit wurden Dateisysteme häufig anfällig für eine Beschädigung der Daten, die zur Reparatur offline geschaltet werden das System benötigen. Obwohl seltenen, wenn eine Beschädigung auftritt, retten ReFS implementiert ein Feature, das beschädigten Daten aus dem Namespace auf einem live Volume entfernt und wird sichergestellt, dass eine gute Daten durch nicht repariert werden beschädigte Daten nicht beeinträchtigt werden. Das Feature Restwert anwenden und Isolieren von Beschädigung der Daten zu Exchange Online-Datenbank-Volumes bedeutet, dass wir nicht betroffenen Datenbanken auf einen beschädigten Datenträger fehlerfrei zwischen dem Zeitpunkt der Beschädigung und Reparieren Aktion weiter können. Dadurch wird die Verfügbarkeit von Datenbanken, die normalerweise durch eine solche Datenträger Beschädigung Probleme beeinträchtigt werden würde erhöht.</span><span class="sxs-lookup"><span data-stu-id="c44ca-p126">**Availability (Salvage)** - ReFS prioritizes the availability of data. Historically, file systems were often susceptible to data corruption that would require the system to be taken offline for repair. Although rare, if corruption does occur, ReFS implements salvage, a feature that removes the corrupt data from the namespace on a live volume and ensures that good data is not adversely affected by non-repairable corrupt data. Applying the Salvage feature and isolating data corruption to Exchange Online database volumes means that we can keep non-affected databases on a corrupted volume healthy between the time of corruption and repair action. This increases the availability of databases that would normally be affected by such disk corruption issues.</span></span> 